{{ block title }}
    Instructions 2: Bonus Payment and Task Types
{{ endblock }}

{{ block content }}
<div class="container">


    <div class="outer-card mb-4">
        <h4 class="mb-4">Task Difficulty Indicators</h4>
        <div class="instructions-text">
            <p>Before each task, you will see an indicator at the top of the screen showing the likely difficulty level.</p>
            <p>Here are the two types of indicators you may see:</p>
        </div>
    </div>

    <!-- Example cards -->
    <div class="example-cards">
        <div class="info-card warning-low mb-3">
            Task difficulty is likely low
        </div>
        <div class="description-card mb-4">
            When you see this indicator, there is a 2/3 probability that the task will be relatively easy.
        </div>

        <div class="info-card warning-high mb-3">
            Task difficulty is likely high
        </div>
        <div class="description-card mb-4">
            When you see this indicator, there is a 2/3 probability that the task will be relatively difficult.
        </div>
    </div>

    <!-- Scoring info -->
    <div class="outer-card">
        <h4 class="mb-4">Scoring and Bonus System:</h4>
        <div class="feedback-examples">
            <div class="feedback-item">
                <div class="input-display input-correct">1</div>
                <p>Correct matches will be highlighted in green</p>
            </div>
            <div class="feedback-item">
                <div class="input-display input-wrong">2</div>
                <p>Incorrect inputs will be highlighted in red</p>
            </div>
        </div>
        
        <div class="instructions-text mt-4">
            <h5 class="mb-3">Bonus Payment Rules</h5>
            
            <div class="bonus-info mb-4">
                <h6>For Tasks Marked as "Likely Low Difficulty":</h6>
                <p>You can earn £{{ bonus_low }} bonus per task if:</p>
                <ul>
                    <li>Your total correct matches exceed a random number (0-60) chosen by the computer</li>
                    <li>You make fewer than 5 incorrect inputs</li>
                </ul>
            </div>

            <div class="bonus-info mb-4">
                <h6>For Tasks Marked as "Likely High Difficulty":</h6>
                <p>You can earn £{{ bonus_high }} bonus per task under the same conditions</p>
            </div>

            <div class="important-note">
                <p><strong>Important:</strong></p>
                <ul>
                    <li>Incorrect inputs are subtracted from your correct matches</li>
                    <li>Making 5 or more incorrect inputs will result in no bonus for that task</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Understanding check questions -->
<div class="outer-card mt-4">
    <h4 class="mb-4">Understanding Check</h4>
    <p>Please answer these questions correctly to proceed.</p>

    <div class="question-block mb-4">
        <p><strong>Question 1:</strong> If the computer chose 25 and you made 30 correct matches with 3 incorrect inputs, what would you receive?</p>
        <div class="options">
            <label class="option">
                <input type="radio" name="q1" value="1">
                <span>£0 for a high difficulty task</span>
            </label>
            <label class="option">
                <input type="radio" name="q1" value="2">
                <span>£{{ bonus_high }} for a high difficulty task</span>
            </label>
            <label class="option">
                <input type="radio" name="q1" value="3">
                <span>£0 for a low difficulty task</span>
            </label>
            <label class="option">
                <input type="radio" name="q1" value="4">
                <span>£{{ bonus_low }} for a low difficulty task</span>
            </label>
        </div>
        <div class="feedback" id="feedback1"></div>
    </div>

    <div class="question-block">
        <p><strong>Question 2:</strong> If the computer chose 15 and you made 30 correct matches with 6 incorrect inputs, what would happen?</p>
        <div class="options">
            <label class="option">
                <input type="radio" name="q2" value="1">
                <span>You would receive £{{ bonus_high }} for a high difficulty task because you exceeded the computer's number</span>
            </label>
            <label class="option">
                <input type="radio" name="q2" value="2">
                <span>You would receive £0 because the number of incorrect inputs exceeded 5</span>
            </label>
        </div>
        <div class="feedback" id="feedback2"></div>
    </div>
</div>

<div id="next-button-container" style="display: none;">
    {{ next_button }}
</div>

<style>
.container {
    max-width: 800px;
    margin: 0 auto;
}

.info-cards {
    width: 600px;
    margin: 0 auto 20px auto;
}

.info-card {
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 10px;
    text-align: center;
}

.example-cards {
    width: 600px;
    margin: 0 auto 20px auto;
}

.description-card {
    text-align: center;
    font-size: 16px;
    color: #666;
}

.warning-high {
    background-color: #fff3cd;
    border-color: #ffeeba;
    color: #856404;
}

.warning-low {
    background-color: #cce5ff;
    border-color: #b8daff;
    color: #004085;
}

.outer-card {
    width: 600px;
    margin: 0 auto;
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
}

.feedback-examples {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
}

.feedback-item {
    text-align: center;
    width: 45%;
}

.input-display {
    width: 120px;
    height: 45px;
    margin: 15px auto;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    background-color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
}

.input-correct {
    background-color: #d4edda;
    border-color: #c3e6cb;
    color: #155724;
}

.input-wrong {
    background-color: #f8d7da;
    border-color: #f5c6cb;
    color: #721c24;
}

.instructions-text {
    text-align: left;
    font-size: 18px;
    line-height: 1.6;
}

.instructions-text p {
    margin-bottom: 10px;
}

.bonus-info {
    background-color: #f8f9fa;
    border-radius: 4px;
    padding: 15px;
    margin: 15px 0;
}

.bonus-info h6 {
    color: #495057;
    margin-bottom: 10px;
}

.important-note {
    background-color: #fff3cd;
    border: 1px solid #ffeeba;
    border-radius: 4px;
    padding: 15px;
    margin-top: 20px;
}

.mb-3 {
    margin-bottom: 1rem;
}

.question-block {
    margin-bottom: 2rem;
    text-align: left;
}

.options {
    margin: 1rem 0;
}

.option {
    display: block;
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.option:hover {
    background-color: #f8f9fa;
}

.feedback {
    margin-top: 10px;
    padding: 10px;
    border-radius: 4px;
    display: none;
}

.feedback.error {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
}

.feedback.success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const correctAnswers = {
        q1: "2",  // £0.30 for high difficulty
        q2: "2"   // £0 because of incorrect inputs
    };
    
    let answersCorrect = {
        q1: false,
        q2: false
    };

    function checkAnswers() {
        return answersCorrect.q1 && answersCorrect.q2;
    }

    function updateNextButton() {
        const nextButton = document.getElementById('next-button-container');
        if (checkAnswers()) {
            nextButton.style.display = 'block';
        } else {
            nextButton.style.display = 'none';
        }
    }

    function handleAnswer(questionName, value) {
        const feedback = document.getElementById(`feedback${questionName.slice(-1)}`);
        const isCorrect = value === correctAnswers[questionName];
        
        feedback.style.display = 'block';
        feedback.className = `feedback ${isCorrect ? 'success' : 'error'}`;
        feedback.textContent = isCorrect ? 
            'Correct!' : 
            'Incorrect. Please review the bonus rules and try again.';
        
        answersCorrect[questionName] = isCorrect;
        updateNextButton();
    }

    // Add event listeners to radio buttons
    document.querySelectorAll('input[type="radio"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            handleAnswer(e.target.name, e.target.value);
        });
    });
});
</script>

{{ endblock }} 